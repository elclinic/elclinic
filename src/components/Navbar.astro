---
// src/components/Navbar.astro

const { title = 'El Clinic Dental' } = Astro.props;
---

<style is:global>
    .mobile-menu {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease-out;
    }
    .mobile-menu.open {
        max-height: 500px;
    }

    .modal-overlay {
        @apply fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center;
        backdrop-filter: blur(3px);
    }

    .modal-content {
        @apply bg-[#2A2525] rounded-xl p-8 max-w-md w-full mx-4;
    }
</style>

<header class="bg-gradient-to-r from-[#201C1C] to-[#1B1818] text-white shadow-lg fixed w-full top-0 z-50">
    <div class="container mx-auto px-4">
        <!-- –î–µ—Å–∫—Ç–æ–ø –≤–µ—Ä—Å–∏—è -->
        <div class="hidden lg:flex items-center justify-between py-4 gap-6">
            <!-- –õ–æ–≥–æ—Ç–∏–ø –∏ —Ç–µ–ª–µ—Ñ–æ–Ω—ã -->
            <div class="flex items-center gap-8">
                <a href="/" class="flex-shrink-0">
                    <img
                            src="https://elclinic.com.ua/wp-content/uploads/2024/12/logo-2-1.webp"
                            alt="El Clinic Dental Logo"
                            class="h-16 w-auto rounded-lg border-2 border-white"
                    >
                </a>
                <div class="flex flex-col">
                    <div class="flex gap-4">
                        <a href="tel:+380662621300" class="hover:text-yellow-400 flex items-center gap-2">
                            <span>üìû</span>
                            <span>+38 (066) 262-13-00</span>
                        </a>
                        <a href="tel:+380982601300" class="hover:text-yellow-400 flex items-center gap-2">
                            <span>üìû</span>
                            <span>+38 (098) 260-13-00</span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ –∫–Ω–æ–ø–∫–∞ -->
            <div class="flex items-center gap-8">
                <nav class="flex space-x-6">
                    <a href="#services" class="hover:text-yellow-400">–ü–æ—Å–ª—É–≥–∏</a>
                    <a href="#doctors" class="hover:text-yellow-400">–õ—ñ–∫–∞—Ä—ñ</a>
                    <a href="#prices" class="hover:text-yellow-400">–¶—ñ–Ω–∏</a>
                    <a href="#reviews" class="hover:text-yellow-400">–í—ñ–¥–≥—É–∫–∏</a>
                </nav>
                <button
                        data-modal-toggle
                        class="bg-gradient-to-r from-yellow-600 to-yellow-500 hover:from-yellow-500 hover:to-yellow-400 px-6 py-3 rounded text-sm font-bold shadow-lg transform transition-transform hover:scale-105 text-[#201C1C]">
                    ü¶∑ –ó–∞–ø–∏—Å–∞—Ç–∏—Å—å
                </button>
            </div>
        </div>

        <!-- –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è -->
        <div class="lg:hidden flex items-center justify-between py-4 gap-4">
            <!-- –õ–æ–≥–æ—Ç–∏–ø -->
            <a href="/" class="flex-shrink-0">
                <img
                        src="https://elclinic.com.ua/wp-content/uploads/2024/12/logo-2-1.webp"
                        alt="Logo"
                        class="h-12 w-auto rounded-lg border-2 border-white"
                >
            </a>

            <!-- –¢–µ–ª–µ—Ñ–æ–Ω—ã –∏ –∫–Ω–æ–ø–∫–∏ -->
            <div class="flex items-center gap-4">
                <div class="flex flex-col items-end text-sm">
                    <a href="tel:+380662621300" class="hover:text-yellow-400">+38 066 262 13 00</a>
                    <a href="tel:+380982601300" class="hover:text-yellow-400">+38 098 260 13 00</a>
                </div>
                <button
                        data-modal-toggle
                        class="bg-gradient-to-r from-yellow-600 to-yellow-500 hover:from-yellow-500 hover:to-yellow-400 px-4 py-2 rounded text-sm font-bold shadow-lg transform transition-transform hover:scale-105 text-[#201C1C]">
                    ü¶∑ –ó–∞–ø–∏—Å
                </button>
                <button id="mobile-menu-button" class="text-gray-300 hover:text-white p-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é -->
    <div id="mobile-menu" class="lg:hidden mobile-menu bg-[#2A2525]">
        <div class="container mx-auto px-4 py-4">
            <div class="flex flex-col space-y-4">
                <a href="#services" class="block py-2 hover:text-yellow-400">–ü–æ—Å–ª—É–≥–∏</a>
                <a href="#doctors" class="block py-2 hover:text-yellow-400">–õ—ñ–∫–∞—Ä—ñ</a>
                <a href="#prices" class="block py-2 hover:text-yellow-400">–¶—ñ–Ω–∏</a>
                <a href="#reviews" class="block py-2 hover:text-yellow-400">–í—ñ–¥–≥—É–∫–∏</a>
            </div>
        </div>
    </div>
</header>


<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
<div id="modal" class="hidden">
    <div class="modal-content">
        <div class="flex justify-between items-center mb-6">
            <h3 class="text-2xl font-bold">–ó–∞–ø–∏—Å –Ω–∞ –ø—Ä–∏–π–æ–º</h3>
            <button class="text-gray-400 hover:text-white">
                ‚úï
            </button>
        </div>

        <form class="space-y-4" action="https://formspree.io/f/mjkgkygl"
              method="POST">
            <div>
                <label class="block mb-2">–í–∞—à–µ —ñ–º'—è</label>
                <input name="name" type="text" class="w-full bg-[#3A3535] rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-yellow-500">
            </div>

            <div>
                <label class="block mb-2">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É</label>
                <input name="tel" type="tel" class="w-full bg-[#3A3535] rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-yellow-500">
            </div>

            <div>
                <label class="block mb-2">–û–±–µ—Ä—ñ—Ç—å –ø–æ—Å–ª—É–≥—É</label>
                <select class="w-full bg-[#3A3535] rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-yellow-500">
                    <option>–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è</option>
                    <option>–õ—ñ–∫—É–≤–∞–Ω–Ω—è –∫–∞—Ä—ñ—î—Å—É</option>
                    <option>–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–µ —á–∏—â–µ–Ω–Ω—è</option>
                </select>
            </div>

            <button
                    type="submit"
                    class="w-full bg-yellow-500 hover:bg-yellow-400 text-[#201C1C] font-bold py-3 rounded-lg transition-colors">
                –ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –∑–∞–ø–∏—Å
            </button>
        </form>
    </div>
</div>

<script is:inline>
    // –ï–¥–∏–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
    document.addEventListener('DOMContentLoaded', () => {
        // –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');

        if (mobileMenuButton && mobileMenu) {
            mobileMenuButton.addEventListener('click', (e) => {
                e.stopPropagation();
                mobileMenu.classList.toggle('open');
            });

            document.addEventListener('click', (e) => {
                if (!mobileMenu.contains(e.target) && !mobileMenuButton.contains(e.target)) {
                    mobileMenu.classList.remove('open');
                }
            });

            mobileMenu.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => mobileMenu.classList.remove('open'));
            });
        }

        // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        const modal = document.getElementById('modal');

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—Ç–∫—Ä—ã—Ç–∏—è
        document.querySelectorAll('[data-modal-toggle]').forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                showModal();
            });
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è
        if (modal) {
            modal.querySelectorAll('button[onclick="hideModal()"]').forEach(btn => {
                btn.addEventListener('click', hideModal);
            });

            modal.addEventListener('click', (e) => {
                if (e.target === modal) hideModal();
            });
        }
    });

    // –§—É–Ω–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–¥–∞–ª–∫–æ–π
    function showModal() {
        const modal = document.getElementById('modal');
        if (!modal) return;

        modal.classList.remove('hidden');
        modal.classList.add('modal-overlay');
        document.addEventListener('keydown', handleEscapeKey);
        // document.addEventListener('click', closeModalOnOutsideClick);
        console.log('showModal');

    }

    function hideModal() {
        const modal = document.getElementById('modal');
        if (!modal) return;

        modal.classList.add('hidden');
        modal.classList.remove('modal-overlay');
        document.removeEventListener('keydown', handleEscapeKey);
        // document.removeEventListener('click', closeModalOnOutsideClick);
        console.log('hideModal');
    }

    // function closeModalOnOutsideClick(e) {
    //     const modalContent = document.querySelector('.modal-content');
    //     if (modalContent && !modalContent.contains(e.target)) {
    //         hideModal();
    //     }
    // }

    function handleEscapeKey(e) {
        if (e.key === 'Escape' && !document.getElementById('modal')?.classList.contains('hidden')) {
            hideModal();
        }
    }
</script>